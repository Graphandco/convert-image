<!DOCTYPE html>
<html lang="fr">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <title>Convert Image — WebP / AVIF</title>
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link
         href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@400;500;600&display=swap"
         rel="stylesheet"
      />
      <link rel="stylesheet" href="/styles.css" />
   </head>
   <body>
      <div class="drop-overlay" id="dropOverlay" aria-hidden="true">
         <span>Déposez les images ici</span>
      </div>
      <main>
         <header class="page-header">
            <img src="/logo.svg" alt="" class="logo" width="32" height="32" />
            <h1>Convert Image</h1>
         </header>

         <div class="zone" id="zone" role="button" tabindex="0">
            <input
               type="file"
               id="file"
               accept=".jpg,.jpeg,.png,.webp,.avif"
               multiple
            />
            <p id="zoneText">Glissez les images ici ou cliquez pour choisir</p>
            <p class="filename" id="filename" hidden></p>
         </div>

         <div class="meta-block" id="metaBlock" hidden>
            <div class="meta-title">Images</div>
            <div class="meta-result-actions" id="metaResultActions" hidden>
               <button type="button" class="btn btn-secondary" id="downloadAll">
                  <svg
                     class="btn-icon"
                     viewBox="0 0 640 640"
                     aria-hidden="true"
                  >
                     <path
                        fill="currentColor"
                        d="M352 96C352 78.3 337.7 64 320 64C302.3 64 288 78.3 288 96L288 306.7L246.6 265.3C234.1 252.8 213.8 252.8 201.3 265.3C188.8 277.8 188.8 298.1 201.3 310.6L297.3 406.6C309.8 419.1 330.1 419.1 342.6 406.6L438.6 310.6C451.1 298.1 451.1 277.8 438.6 265.3C426.1 252.8 405.8 252.8 393.3 265.3L352 306.7L352 96zM160 384C124.7 384 96 412.7 96 448L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 448C544 412.7 515.3 384 480 384L433.1 384L376.5 440.6C345.3 471.8 294.6 471.8 263.4 440.6L206.9 384L160 384zM464 440C477.3 440 488 450.7 488 464C488 477.3 477.3 488 464 488C450.7 488 440 477.3 440 464C440 450.7 450.7 440 464 440z"
                     />
                  </svg>
                  Tout télécharger
               </button>
            </div>
            <table class="meta-table">
               <thead>
                  <tr>
                     <th>Dimensions</th>
                     <th>Poids</th>
                     <th>Format</th>
                  </tr>
               </thead>
               <tbody id="metaBody"></tbody>
            </table>
         </div>

         <div class="row">
            <label for="format">Format de sortie</label>
            <select id="format">
               <option value="webp">WebP</option>
               <option value="avif">AVIF</option>
               <option value="jpg">JPG</option>
               <option value="png">PNG</option>
               <option value="ico">ICO</option>
            </select>
         </div>

         <div class="row">
            <label for="quality"
               >Qualité
               <span class="range-val" id="qualityVal">80</span> %</label
            >
            <input
               type="range"
               id="quality"
               min="5"
               max="100"
               step="5"
               value="80"
            />
         </div>

         <div class="row">
            <label for="maxWidth">Largeur max (px) — facultatif</label>
            <input
               type="number"
               id="maxWidth"
               min="1"
               max="8000"
               placeholder="Ex. 1920"
            />
            <p class="hint">Laissez vide pour conserver les dimensions.</p>
         </div>

         <button type="button" class="btn" id="convert" disabled>
            Convertir
         </button>

         <div class="msg" id="msg"></div>
      </main>

      <script src="/app.js"></script>
   </body>
</html>
